<div class="dashboard-header">
  <h2 class="dashboard-title mb-0">Chỉnh Sửa Học Kỳ</h2>
</div>

<div class="container my-3">
  <a href="/semester" class="btn btn-primary btn-sm mb-3">
    <i class="fas fa-arrow-left me-1"></i> Quay lại
  </a>

  <form action="/semester/update/{{semester._id}}" method="POST" id="editSemesterForm">
    <div class="card mb-4 shadow-sm">
      <div class="card-header p-3 bg-gradient-gray">
        <h5>Thông tin học kỳ</h5>
      </div>
      <div class="card-body row g-3">
        <div class="col-md-4">
          <label class="form-label"><strong>Tên học kỳ</strong></label>
          <input type="text" class="form-control" name="tenHocKy" value="{{semester.tenHocKy}}" required>
        </div>
        <div class="col-md-4">
          <label class="form-label"><strong>Năm học</strong></label>
          <input type="text" class="form-control" name="namHoc" value="{{semester.namHoc}}" required>
        </div>
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-header bg-gradient-gray d-flex justify-content-between align-items-center p-3">
        <h5 >Danh sách học phần</h5>
        <small>Chỉnh sửa học phần</small>
      </div>
      <div class="card-body p-3">
        <!-- Vùng cuộn -->
        <div class="table-scroll-wrapper">
          <table class="table table-hover table-sm mb-0" id="courseTable">
            <thead>
              <tr>
                <th class="text-center col-stt">STT</th>
                <th class="text-center col-code">Mã học phần</th>
                <th class="text-center col-name">Tên học phần (<span class="text-warning ms-2 fw-bold" style="font-size: 1em;">
                        <i class="fas fa-star-of-life"></i>
                        </span> : Học phần điều kiện )</th>
                <th class="text-center col-credit">Số tín chỉ</th>
                <th class="text-center col-choose">Chọn</th>
              </tr>
            </thead>
            <tbody>
              {{#if courseList.length}}
                {{#each courseList}}
                  <tr>
                    <td class="text-center col-stt">{{inc @index}}</td>
                    <td class="text-center col-code"><code>{{HocPhan.maHocPhan}}</code></td>
                    <td class="text-center col-name">
                      {{HocPhan.tenHocPhan}}
                      {{#if isRetake}}
                        <span class="badge bg-danger ms-2">Học lại</span>
                      {{/if}}
                      {{#if HocPhan.laHocPhanDieuKien}}
                        <span class="text-warning ms-2 fw-bold" style="font-size: 1em;">
                          <i class="fas fa-star-of-life"></i>
                        </span>
                      {{/if}}
                    </td>
                    <td class="text-center col-credit">{{HocPhan.soTinChi}}</td>
                    <td class="text-center col-choose">
                      <input type="checkbox" name="selectedItems" value="{{courseId}}" 
                        {{#if isSelected}}checked{{/if}}>
                      <input type="hidden" name="scoreId_{{courseId}}" value="{{scoreId}}">
                    </td>
                  </tr>
                {{/each}}
              {{else}}
                <tr>
                  <td colspan="7" class="text-center py-4 text-muted">
                    <i class="fas fa-info-circle me-2"></i>
                    Không có học phần nào để hiển thị. Tất cả học phần đã được thêm vào các học kỳ.
                  </td>
                </tr>
              {{/if}}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="text-end mt-3">
      <button type="submit" class="btn btn-primary px-4">Lưu thay đổi</button>
    </div>
  </form>
</div>
