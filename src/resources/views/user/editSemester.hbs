<div class="dashboard-header">
  <h2 class="dashboard-title mb-0">Chỉnh Sửa Học Kỳ</h2>
</div>

<div class="container my-3">
  <a href="/semester" class="btn btn-primary btn-sm mb-3">
    <i class="fas fa-arrow-left me-1"></i> Quay lại
  </a>

  <form action="/semester/update/{{semester._id}}" method="POST" id="editSemesterForm">
    <div class="card mb-4 shadow-sm">
      <div class="card-header p-3 bg-gradient-gray">
        <h5>Thông tin học kỳ</h5>
      </div>
      <div class="card-body row g-3">
        <div class="col-md-4">
          <label class="form-label"><strong>Tên học kỳ</strong></label>
          <input type="text" class="form-control" name="tenHocKy" value="{{semester.tenHocKy}}" required>
        </div>
        <div class="col-md-4">
          <label class="form-label"><strong>Năm học</strong></label>
          <input type="text" class="form-control" name="namHoc" value="{{semester.namHoc}}" required>
        </div>
        {{!-- <div class="col-md-4">
          <label class="form-label"><strong>Ngày bắt đầu</strong></label>
          <input type="date" class="form-control" name="startDate" value="{{formatDate semester.startDate 'yyyy-MM-dd'}}" required>
        </div>
        <div class="col-md-4">
          <label class="form-label"><strong>Số tuần</strong></label>
          <input type="number" class="form-control" name="soTuan" value="{{semester.soTuan}}" min="1" max="52" required>
        </div> --}}
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-header bg-gradient-gray d-flex justify-content-between align-items-center p-3">
        <h5 >Danh sách học phần</h5>
        <small>Chỉnh sửa học phần</small>
      </div>
      <div class="card-body p-0">
        <!-- Vùng cuộn -->
        <div class="table-scroll-wrapper">
          <table class="table table-bordered table-hover align-middle mb-0">
            <thead class="table-light sticky-top">
              <tr>
                <th>STT</th>
                <th>Mã học phần</th>
                <th>Tên học phần</th>
                <th>Số tín chỉ</th>
                {{!-- <th>Thứ</th>
                <th>Bắt đầu</th>
                <th>Kết thúc</th> --}}
                <th>Chọn</th>
              </tr>
            </thead>
            <tbody>
              {{#if courseList.length}}
                {{#each courseList}}
                  <tr>
                    <td>{{inc @index}}</td>
                    <td><code>{{HocPhan.maHocPhan}}</code></td>
                    <td>{{HocPhan.tenHocPhan}}</td>
                    <td>{{HocPhan.soTinChi}}</td>
                    {{!-- <td>
                      <select name="items[{{_id}}][thu]" class="form-select form-select-sm">
                        {{#each (array "Thứ Hai" "Thứ Ba" "Thứ Tư" "Thứ Năm" "Thứ Sáu" "Thứ Bảy")}}
                          <option value="{{this}}" {{#ifEquals this ../thu}}selected{{/ifEquals}}>{{this}}</option>
                        {{/each}}
                      </select>
                    </td>
                    <td>
                      <input type="time" name="items[{{_id}}][gioBatDau]" value="{{gioBatDau}}" class="form-control form-control-sm">
                    </td>
                    <td>
                      <input type="time" name="items[{{_id}}][gioKetThuc]" value="{{gioKetThuc}}" class="form-control form-control-sm">
                    </td> --}}
                    <td class="text-center">
                      <input type="checkbox" name="selectedItems" value="{{courseId}}" 
       {{#if isSelected}}checked{{/if}}>
<input type="hidden" name="scoreId_{{courseId}}" value="{{scoreId}}">


                    </td>
                  </tr>
                {{/each}}
              {{else}}
                <tr>
                  <td colspan="7" class="text-center py-4 text-muted">
                    <i class="fas fa-info-circle me-2"></i>
                    Không có học phần nào để hiển thị. Tất cả học phần đã được thêm vào các học kỳ.
                  </td>
                </tr>
              {{/if}}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="text-end mt-3">
      <button type="submit" class="btn btn-primary px-4">Lưu thay đổi</button>
    </div>
  </form>
</div>
