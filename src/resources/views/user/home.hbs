
  <!-- Ti√™u ƒë·ªÅ + Avatar -->
  <div class="dashboard-header mb-4 d-flex justify-content-between align-items-center">
    <h2 class="dashboard-title mb-0">
      <i class="fas fa-home me-2"></i> Trang Ch·ªß
    </h2>
    <div class="user-info position-relative">
      <img src="{{user.avatar}}" alt="Avatar" class="user-avatar dropdown-toggle"
        onerror="this.onerror=null;this.src='/img/avatar.png';" id="avatarDropdown" />
      <span class="user-name">{{user.username}}</span>
      <div class="dropdown-menu-user" id="userMenu">
        <a href="/account" class="dropdown-item"><i class="fas fa-pen"></i> Ch·ªânh s·ª≠a th√¥ng tin</a>
        <a href="/logout" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a>
      </div>
    </div>
  </div>
<main class="container mt-4">
  <!-- Ch√†o m·ª´ng -->
  <div class="card shadow-sm p-4 mb-4 bg-white rounded">
    <h4 class="text-primary mb-1">üëã Ch√†o m·ª´ng tr·ªü l·∫°i, {{user.username}}!</h4>
    <p class="mb-0">H√£y ti·∫øp t·ª•c h√†nh tr√¨nh h·ªçc t·∫≠p c·ªßa b·∫°n h√¥m nay.</p>
  </div>

  <!-- Th·ªëng k√™ h·ªçc t·∫≠p -->
  <div class="card shadow-sm p-4 mb-5 bg-white rounded">
    <h5 class="text-dark mb-3">üìä Th·ªëng k√™ h·ªçc t·∫≠p</h5>
    <p><strong>{{totalCredits}} / 152 t√≠n ch·ªâ ƒë√£ ho√†n th√†nh</strong></p>
    <canvas id="creditChart" height="180"></canvas>

    {{#if totalCreditsExceeded}}
      <div class="alert alert-warning mt-3" role="alert">
        ‚ö†Ô∏è S·ªë t√≠n ch·ªâ v∆∞·ª£t qu√° gi·ªõi h·∫°n cho ph√©p!
      </div>
    {{/if}}
  </div>

  <!-- Menu ƒëi·ªÅu h∆∞·ªõng ngang -->
  <div class="card shadow-sm p-4 mb-5 bg-white rounded">
    <h5 class="mb-4 text-dark">üìÅ Truy c·∫≠p nhanh</h5>
    <div class="row row-cols-2 row-cols-md-4 g-3 text-center">
      <a href="/course" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-book fa-lg text-primary mb-2"></i>
          <div>H·ªçc Ph·∫ßn</div>
        </div>
      </a>
      <a href="/document" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-file fa-lg text-success mb-2"></i>
          <div>T√†i Li·ªáu</div>
        </div>
      </a>
      <a href="/progress" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-chart-line fa-lg text-warning mb-2"></i>
          <div>Ti·∫øn ƒê·ªô</div>
        </div>
      </a>
      <a href="/semester" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-calendar-alt fa-lg text-danger mb-2"></i>
          <div>L·ªãch H·ªçc</div>
        </div>
      </a>
      <a href="/score" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-graduation-cap fa-lg text-secondary mb-2"></i>
          <div>K·∫øt Qu·∫£</div>
        </div>
      </a>
      <a href="/video" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-video fa-lg" style="color: #cf4408;"></i>
          <div>Kh√≥a H·ªçc</div>
        </div>
      </a>
      <a href="/account" class="col text-decoration-none text-dark">
        <div class="p-3 border rounded shadow-sm bg-light hover-shadow">
          <i class="fas fa-user fa-lg" style="color: #531aff;"></i>
          <div>T√†i Kho·∫£n</div>
        </div>
      </a>
    </div>
</div>

</main>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const totalCredits = {{totalCredits}};
  const remainingCredits = 152 - totalCredits;
  const totalNoSubjects = {{totalNoSubjects}};

  const ctx = document.getElementById('creditChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['T√≠n ch·ªâ ƒë√£ ho√†n th√†nh', 'C√≤n l·∫°i', 'M√¥n b·ªã n·ª£'],
      datasets: [{
        label: 'Th·ªëng k√™ h·ªçc t·∫≠p',
        data: [totalCredits, remainingCredits, totalNoSubjects],
        backgroundColor: ['#4CAF50', '#90CAF9', '#f44336'],
        borderColor: ['#388E3C', '#42A5F5', '#d32f2f'],
        borderWidth: 1,
        borderRadius: 4
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          max: 152,
          title: {
            display: true,
            text: 'S·ªë l∆∞·ª£ng'
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: function (context) {
              return `${context.label}: ${context.raw}`;
            }
          }
        }
      }
    }
  });
</script>
